# BBS

> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

-   [All](#All)
-   [Board](#Board)
-   [Comment](#Comment)
-   [Article](#Article)
-   [User](#User)

## All

```mermaid
erDiagram
"articles" {
    String id PK
    String author_id FK
    String board_id FK
    Boolean is_notice
    DateTime created_at
    DateTime deleted_at "nullable"
}
"article_snapshots" {
    String id PK
    String article_id FK
    String title
    String body_url
    ArticleBodyFormat body_format
    DateTime created_at
}
"article_attachment_snapshots" {
    String id PK
    String snapshot_id FK
    String attachment_id FK
    Int sequence
}
"boards" {
    String id PK
    String name
    String description
    String manager_membership_id FK
    String read_article_list_membership_id FK "nullable"
    String read_article_membership_id FK "nullable"
    String write_article_membership_id FK
    String read_comment_list_membership_id FK "nullable"
    String write_comment_membership_id FK
    DateTime created_at
    DateTime deleted_at "nullable"
}
"comments" {
    String id PK
    String author_id FK
    String article_id FK
    String parent_id FK "nullable"
    DateTime created_at
    DateTime deleted_at "nullable"
}
"comment_snapshots" {
    String id PK
    String comment_id FK
    String body
    DateTime created_at
}
"attachments" {
    String id PK
    String name
    String extension
    String url
    DateTime created_at
}
"memberships" {
    String id PK
    String name
    Int rank
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"authentications" {
    String id PK
    String user_id FK "nullable"
    OauthType oauth_type
    String oauth_sub
    String email "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"users" {
    String id PK
    String membership_id FK "nullable"
    String name
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"articles" }|--|| "users" : author
"articles" }|--|| "boards" : board
"article_snapshots" }|--|| "articles" : article
"article_attachment_snapshots" }|--|| "article_snapshots" : snapshot
"article_attachment_snapshots" }|--|| "attachments" : attachment
"boards" }|--|| "memberships" : manager_membership
"boards" }o--|| "memberships" : read_article_list_membership
"boards" }o--|| "memberships" : read_article_membership
"boards" }|--|| "memberships" : write_article_membership
"boards" }o--|| "memberships" : read_comment_list_membership
"boards" }|--|| "memberships" : write_comment_membership
"comments" }|--|| "users" : author
"comments" }|--|| "articles" : article
"comments" }o--o| "comments" : parent
"comment_snapshots" }|--|| "comments" : comment
"authentications" }o--|| "users" : user
"users" }o--|| "memberships" : membership
```

### `articles`

Root Entity of Article

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `board_id`
    > referenced in `boards`
    >
    > `uuid` type
-   `is_notice`: If true, a article is notification.
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `article_snapshots`

Snapshot of Article

an `article_snapshots` record contains the content of an article's specific version.

When a user edit an article, a new snapshot record is created, and readers will view the snapshot record linked to the most recently created version among the connected records.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `article_id`
    > referenced in `articles`
    >
    > `uuid` type
-   `title`: title of article
-   `body_url`: URL path of article body resource
-   `body_format`: one of `html`, `md`, `txt`
-   `created_at`: creation time of record

### `article_attachment_snapshots`

Attachment Snapshot for Article

an `article_attachment_snapshots` entity connects an `article_snapshots` record with an `attachments` record.

If author add attachment to an article, a new record of `article_attachment_snapshots` is created.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `snapshot_id`
    > referenced in `article_snapshots`
    >
    > `uuid` type
-   `attachment_id`
    > referenced in `attachments`
    >
    > `uuid` type
-   `sequence`: `sequence` is used to distinguish each individual `attachment`.

### `boards`

Root Entity of Board

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`:
-   `description`:
-   `manager_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_comment_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_comment_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `comments`

Root Entity of Comment

a user can comment short text on article or other comment

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `article_id`
    > referenced in `articles`
    >
    > `uuid` type
-   `parent_id`
    > referenced in `comments`
    >
    > `uuid` type
    >
    > a parent comment id in a hierarchical structure
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `comment_snapshots`

Snapshot of Comment

an `comment_snapshots` record contains the content of an comment's specific version.

When a user edit an comment, a new snapshot record is created, and readers will view the snapshot record linked to the most recently created version among the connected records.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `comment_id`
    > referenced in `comments`
    >
    > `uuid` type
-   `body`:
-   `created_at`: creation time of record

### `attachments`

Attachment Entity

All the attachment resources managed in the BBS

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`: name of attachment resource
-   `extension`: extension of resource like `md`, `html`, `jpeg`...
-   `url`: URL path of real resource
-   `created_at`: creation time of record

### `memberships`

Membership Entity

a user can receive one or zero membership, which signifies their permission level in the BBS.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`: displayed name of membership
-   `rank`: `rank` is used for membership grade comparison
-   `image_url`:
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `authentications`

Authentication Entity of User

combination of `oauth_sub` and `oauth_type` is unique

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `user_id`
    > referenced in `users`
    >
    > `uuid` type
-   `oauth_type`: one of `github`, `kakao`
-   `oauth_sub`: oauth server user id
-   `email`: verified email
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `users`

Root Entity of User

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
    >
    > If null, user membership is same with unauthorized user
-   `name`: displayed name of user
-   `image_url`: url of user profile image
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

## Board

```mermaid
erDiagram
"articles" {
    String id PK
    String author_id FK
    String board_id FK
    Boolean is_notice
    DateTime created_at
    DateTime deleted_at "nullable"
}
"boards" {
    String id PK
    String name
    String description
    String manager_membership_id FK
    String read_article_list_membership_id FK "nullable"
    String read_article_membership_id FK "nullable"
    String write_article_membership_id FK
    String read_comment_list_membership_id FK "nullable"
    String write_comment_membership_id FK
    DateTime created_at
    DateTime deleted_at "nullable"
}
"memberships" {
    String id PK
    String name
    Int rank
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"users" {
    String id PK
    String membership_id FK "nullable"
    String name
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"articles" }|--|| "users" : author
"articles" }|--|| "boards" : board
"boards" }|--|| "memberships" : manager_membership
"boards" }o--|| "memberships" : read_article_list_membership
"boards" }o--|| "memberships" : read_article_membership
"boards" }|--|| "memberships" : write_article_membership
"boards" }o--|| "memberships" : read_comment_list_membership
"boards" }|--|| "memberships" : write_comment_membership
"users" }o--|| "memberships" : membership
```

### `articles`

Root Entity of Article

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `board_id`
    > referenced in `boards`
    >
    > `uuid` type
-   `is_notice`: If true, a article is notification.
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `boards`

Root Entity of Board

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`:
-   `description`:
-   `manager_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_comment_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_comment_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `memberships`

Membership Entity

a user can receive one or zero membership, which signifies their permission level in the BBS.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`: displayed name of membership
-   `rank`: `rank` is used for membership grade comparison
-   `image_url`:
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `users`

Root Entity of User

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
    >
    > If null, user membership is same with unauthorized user
-   `name`: displayed name of user
-   `image_url`: url of user profile image
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

## Comment

```mermaid
erDiagram
"articles" {
    String id PK
    String author_id FK
    String board_id FK
    Boolean is_notice
    DateTime created_at
    DateTime deleted_at "nullable"
}
"comments" {
    String id PK
    String author_id FK
    String article_id FK
    String parent_id FK "nullable"
    DateTime created_at
    DateTime deleted_at "nullable"
}
"comment_snapshots" {
    String id PK
    String comment_id FK
    String body
    DateTime created_at
}
"users" {
    String id PK
    String membership_id FK "nullable"
    String name
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"articles" }|--|| "users" : author
"comments" }|--|| "users" : author
"comments" }|--|| "articles" : article
"comments" }o--o| "comments" : parent
"comment_snapshots" }|--|| "comments" : comment
```

### `articles`

Root Entity of Article

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `board_id`
    > referenced in `boards`
    >
    > `uuid` type
-   `is_notice`: If true, a article is notification.
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `comments`

Root Entity of Comment

a user can comment short text on article or other comment

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `article_id`
    > referenced in `articles`
    >
    > `uuid` type
-   `parent_id`
    > referenced in `comments`
    >
    > `uuid` type
    >
    > a parent comment id in a hierarchical structure
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `comment_snapshots`

Snapshot of Comment

an `comment_snapshots` record contains the content of an comment's specific version.

When a user edit an comment, a new snapshot record is created, and readers will view the snapshot record linked to the most recently created version among the connected records.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `comment_id`
    > referenced in `comments`
    >
    > `uuid` type
-   `body`:
-   `created_at`: creation time of record

### `users`

Root Entity of User

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
    >
    > If null, user membership is same with unauthorized user
-   `name`: displayed name of user
-   `image_url`: url of user profile image
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

## Article

```mermaid
erDiagram
"articles" {
    String id PK
    String author_id FK
    String board_id FK
    Boolean is_notice
    DateTime created_at
    DateTime deleted_at "nullable"
}
"article_snapshots" {
    String id PK
    String article_id FK
    String title
    String body_url
    ArticleBodyFormat body_format
    DateTime created_at
}
"article_attachment_snapshots" {
    String id PK
    String snapshot_id FK
    String attachment_id FK
    Int sequence
}
"boards" {
    String id PK
    String name
    String description
    String manager_membership_id FK
    String read_article_list_membership_id FK "nullable"
    String read_article_membership_id FK "nullable"
    String write_article_membership_id FK
    String read_comment_list_membership_id FK "nullable"
    String write_comment_membership_id FK
    DateTime created_at
    DateTime deleted_at "nullable"
}
"comments" {
    String id PK
    String author_id FK
    String article_id FK
    String parent_id FK "nullable"
    DateTime created_at
    DateTime deleted_at "nullable"
}
"attachments" {
    String id PK
    String name
    String extension
    String url
    DateTime created_at
}
"users" {
    String id PK
    String membership_id FK "nullable"
    String name
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"articles" }|--|| "users" : author
"articles" }|--|| "boards" : board
"article_snapshots" }|--|| "articles" : article
"article_attachment_snapshots" }|--|| "article_snapshots" : snapshot
"article_attachment_snapshots" }|--|| "attachments" : attachment
"comments" }|--|| "users" : author
"comments" }|--|| "articles" : article
"comments" }o--o| "comments" : parent
```

### `articles`

Root Entity of Article

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `board_id`
    > referenced in `boards`
    >
    > `uuid` type
-   `is_notice`: If true, a article is notification.
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `article_snapshots`

Snapshot of Article

an `article_snapshots` record contains the content of an article's specific version.

When a user edit an article, a new snapshot record is created, and readers will view the snapshot record linked to the most recently created version among the connected records.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `article_id`
    > referenced in `articles`
    >
    > `uuid` type
-   `title`: title of article
-   `body_url`: URL path of article body resource
-   `body_format`: one of `html`, `md`, `txt`
-   `created_at`: creation time of record

### `article_attachment_snapshots`

Attachment Snapshot for Article

an `article_attachment_snapshots` entity connects an `article_snapshots` record with an `attachments` record.

If author add attachment to an article, a new record of `article_attachment_snapshots` is created.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `snapshot_id`
    > referenced in `article_snapshots`
    >
    > `uuid` type
-   `attachment_id`
    > referenced in `attachments`
    >
    > `uuid` type
-   `sequence`: `sequence` is used to distinguish each individual `attachment`.

### `boards`

Root Entity of Board

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`:
-   `description`:
-   `manager_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_article_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `read_comment_list_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `write_comment_membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `comments`

Root Entity of Comment

a user can comment short text on article or other comment

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `author_id`
    > referenced in `users`
    >
    > `uuid` type
-   `article_id`
    > referenced in `articles`
    >
    > `uuid` type
-   `parent_id`
    > referenced in `comments`
    >
    > `uuid` type
    >
    > a parent comment id in a hierarchical structure
-   `created_at`: creation time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `attachments`

Attachment Entity

All the attachment resources managed in the BBS

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`: name of attachment resource
-   `extension`: extension of resource like `md`, `html`, `jpeg`...
-   `url`: URL path of real resource
-   `created_at`: creation time of record

### `users`

Root Entity of User

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
    >
    > If null, user membership is same with unauthorized user
-   `name`: displayed name of user
-   `image_url`: url of user profile image
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

## User

```mermaid
erDiagram
"memberships" {
    String id PK
    String name
    Int rank
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"authentications" {
    String id PK
    String user_id FK "nullable"
    OauthType oauth_type
    String oauth_sub
    String email "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"users" {
    String id PK
    String membership_id FK "nullable"
    String name
    String image_url "nullable"
    DateTime created_at
    DateTime updated_at "nullable"
    DateTime deleted_at "nullable"
}
"authentications" }o--|| "users" : user
"users" }o--|| "memberships" : membership
```

### `memberships`

Membership Entity

a user can receive one or zero membership, which signifies their permission level in the BBS.

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `name`: displayed name of membership
-   `rank`: `rank` is used for membership grade comparison
-   `image_url`:
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `authentications`

Authentication Entity of User

combination of `oauth_sub` and `oauth_type` is unique

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `user_id`
    > referenced in `users`
    >
    > `uuid` type
-   `oauth_type`: one of `github`, `kakao`
-   `oauth_sub`: oauth server user id
-   `email`: verified email
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted

### `users`

Root Entity of User

**Properties**

-   `id`
    > record identity
    >
    > `uuid` type
-   `membership_id`
    > referenced in `memberships`
    >
    > `uuid` type
    >
    > If null, user membership is same with unauthorized user
-   `name`: displayed name of user
-   `image_url`: url of user profile image
-   `created_at`: creation time of record
-   `updated_at`: revision time of record
-   `deleted_at`
    > deletion time of record
    >
    > if null, a record is soft-deleted
